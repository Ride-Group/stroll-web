(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6595babf"],{"098f":function(t,e,a){"use strict";a("2063")},2063:function(t,e,a){},"4ec6":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{padding:"0 0 0 0"}},[a("h4",{style:{marginBottom:"20px"}},[t._v(t._s(t.title))]),a("v-chart",{attrs:{"force-fit":!0,height:t.height,data:t.data,scale:t.scale,onClick:t.handleClick}},[a("v-tooltip"),a("v-axis"),a("v-legend"),a("v-line",{attrs:{position:"type*y",color:"x"}}),a("v-point",{attrs:{position:"type*y",color:"x",size:4,"v-style":t.style,shape:"circle"}})],1)],1)},n=[],o=a("216a"),i=a("c917");function s(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=u(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function u(t,e){if(t){if("string"===typeof t)return l(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var c={name:"LineChartMultid",mixins:[i["a"]],props:{title:{type:String,default:""},dataSource:{type:Array,default:function(){return[{type:"Jan",jeecg:7,jeebt:3.9},{type:"Feb",jeecg:6.9,jeebt:4.2},{type:"Mar",jeecg:9.5,jeebt:5.7},{type:"Apr",jeecg:14.5,jeebt:8.5},{type:"May",jeecg:18.4,jeebt:11.9},{type:"Jun",jeecg:21.5,jeebt:15.2},{type:"Jul",jeecg:25.2,jeebt:17},{type:"Aug",jeecg:26.5,jeebt:16.6},{type:"Sep",jeecg:23.3,jeebt:14.2},{type:"Oct",jeecg:18.3,jeebt:10.3},{type:"Nov",jeecg:13.9,jeebt:6.6},{type:"Dec",jeecg:9.6,jeebt:4.8}]}},fields:{type:Array,default:function(){return["jeecg","jeebt"]}},aliases:{type:Array,default:function(){return[]}},height:{type:Number,default:254}},data:function(){return{scale:[{type:"cat",dataKey:"x",min:0,max:1}],style:{stroke:"#fff",lineWidth:1}}},computed:{data:function(){var t=this,e=(new o["DataSet"].View).source(this.dataSource);e.transform({type:"fold",fields:this.fields,key:"x",value:"y"});var a=e.rows;return a.forEach((function(e){var a,r=s(t.aliases);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(n.field===e.x){e.x=n.alias;break}}}catch(o){r.e(o)}finally{r.f()}})),a}}},d=c,y=a("cba8"),p=Object(y["a"])(d,r,n,!1,null,"c7df4536",null);e["default"]=p.exports},"6cb2":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-chart",{attrs:{forceFit:!0,height:t.height,data:t.data,scale:t.scale,onClick:t.handleClick}},[a("v-tooltip",{attrs:{showTitle:!1,dataKey:"item*percent"}}),a("v-axis"),a("v-legend",{attrs:{dataKey:"item"}}),a("v-pie",{attrs:{position:"percent",color:"item","v-style":t.pieStyle,label:t.labelConfig}}),a("v-coord",{attrs:{type:"theta"}})],1)},n=[],o=a("c917"),i=a("216a"),s={name:"Pie",mixins:[o["a"]],props:{title:{type:String,default:""},height:{type:Number,default:254},dataSource:{type:Array,default:function(){return[{item:"示例一",count:40},{item:"示例二",count:21},{item:"示例三",count:17},{item:"示例四",count:13},{item:"示例五",count:9}]}}},data:function(){return{scale:[{dataKey:"percent",min:0,formatter:".0%"}],pieStyle:{stroke:"#fff",lineWidth:1},labelConfig:["percent",{formatter:function(t,e){return e.point.item+": "+t}}]}},computed:{data:function(){var t=(new i.View).source(this.dataSource);return t.transform({type:"percent",field:"count",dimension:"item",as:"percent"}),t.rows}}},u=s,l=a("cba8"),c=Object(l["a"])(u,r,n,!1,null,null,null);e["default"]=c.exports},c917:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var r={methods:{handleClick:function(t,e){this.handleEvent("click",t,e)},handleEvent:function(t,e,a){this.$emit(t,e,a)}}}},edd9:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{padding:"0 0 32px 32px"}},[a("h4",{style:{marginBottom:"20px"}},[t._v(t._s(t.title))]),a("v-chart",{attrs:{forceFit:!0,height:t.height,data:t.dataSource,scale:t.scale,padding:t.padding}},[a("v-tooltip"),a("v-axis"),a("v-bar",{attrs:{position:"x*y"}})],1)],1)},n=[],o=a("ca00"),i={name:"Bar",props:{dataSource:{type:Array,required:!0},yaxisText:{type:String,default:"y"},title:{type:String,default:""},height:{type:Number,default:254}},data:function(){return{padding:["auto","auto","40","50"]}},computed:{scale:function(){return[{dataKey:"y",alias:this.yaxisText}]}},mounted:function(){Object(o["o"])()}},s=i,u=a("cba8"),l=Object(u["a"])(s,r,n,!1,null,null,null);e["default"]=l.exports},f5d0:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{bordered:!1}},[a("a-tabs",{attrs:{defaultActiveKey:"1"},on:{change:t.callback}},[a("a-tab-pane",{key:"1",attrs:{tab:"时间分布"}},[a("a-row",[a("a-col",{attrs:{span:4}},[a("a-radio-group",{attrs:{value:t.ytdType},on:{change:t.statisticst}},[a("a-radio-button",{attrs:{value:"day"}},[t._v("今天")]),a("a-radio-button",{attrs:{value:"week"}},[t._v("本周")]),a("a-radio-button",{attrs:{value:"month"}},[t._v("本月")]),a("a-radio-button",{attrs:{value:"year"}},[t._v("今年")])],1)],1),a("a-col",{attrs:{span:14}},[a("a-range-picker",{attrs:{"show-time":{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",placeholder:["开始时间","结束时间"]},on:{change:t.onChange,ok:t.onOk}})],1)],1),a("div",{staticStyle:{padding:"30px"}},[a("a-row",{attrs:{gutter:16}},t._l(t.cardListData,(function(e){return a("a-col",{key:e.title,attrs:{span:6}},[a("a-card",[a("a-statistic",{staticStyle:{"margin-right":"50px"},attrs:{title:e.title,value:e.count,precision:0,suffix:"","value-style":{color:e.count>=0?"#3f8600":"#cf1322"}},scopedSlots:t._u([{key:"prefix",fn:function(){return[a("a-icon",{attrs:{type:e.count>=0?"arrow-up":"arrow-down"}})]},proxy:!0}],null,!0)})],1)],1)})),1)],1)],1),a("a-tab-pane",{key:"3",attrs:{tab:"总览"}},[a("a-row",[a("a-col",{attrs:{span:10}},[a("a-radio-group",{attrs:{value:t.allType},on:{change:t.statisticst}},[a("a-radio-button",{attrs:{value:"all"}},[t._v("总览")]),a("a-radio-button",{attrs:{value:"onlineUser"}},[t._v("在线人数")]),a("a-radio-button",{attrs:{value:"month"}},[t._v("新增用户")]),a("a-radio-button",{attrs:{value:"year"}},[t._v("贴子数量")])],1)],1)],1),a("a-row",[0!=t.lineDataSource.length?a("line-chart-multid",{attrs:{title:"在现用户数",dataSource:t.lineDataSource,fields:t.lineDataSourceFields,height:200}}):t._e()],1),a("div",{staticStyle:{padding:"30px"}},[a("a-row",{attrs:{gutter:16}},t._l(t.cardListData,(function(e){return a("a-col",{key:e.title,attrs:{span:6}},[a("a-card",[a("a-statistic",{staticStyle:{"margin-right":"50px"},attrs:{title:e.title,value:e.count,precision:0,suffix:"","value-style":{color:e.count>=0?"#3f8600":"#cf1322"}},scopedSlots:t._u([{key:"prefix",fn:function(){return[a("a-icon",{attrs:{type:e.count>=0?"arrow-up":"arrow-down"}})]},proxy:!0}],null,!0)})],1)],1)})),1)],1)],1)],1)],1)},n=[],o=a("edd9"),i=a("6cb2"),s=a("249b"),u=a("4ec6"),l=a("0fea"),c=a("430a"),d=a("f19b"),y=a.n(d),p={name:"YTDStatist",components:{ACol:s["b"],LineChartMultid:u["default"],Bar:o["default"],Pie:i["default"]},data:function(){return{description:"档案统计页面",queryParam:{},countSource:[],ytdType:"day",allType:"All",tabStatus:"ytd",lineDataSource:[],lineDataSourceFields:[],cardQueryParam:{sysOrgCode:c["default"].ls.get("Login_Userinfo").orgCode,startTime:y()().weekday(-7).format("yyyy-MM-DD 00:00:00"),endTime:y()().weekday(0).format("yyyy-MM-DD 00:00:00")},cardListData:[],url:{getDayCountInfo:"/bbs/BbsStatist/wise/back/getDayCountInfo",getAllCountInfo:"/bbs/BbsStatist/wise/back/getAllCountInfo"}}},created:function(){var t=this.url.getDayCountInfo;this.cardQueryParam={sysOrgCode:c["default"].ls.get("Login_Userinfo").orgCode,startTime:y()(new Date).format("yyyy-MM-DD 00:00:00"),endTime:y()(new Date).format("yyyy-MM-DD HH:mm:ss")},this.loadDate(t,"day",this.cardQueryParam)},methods:{onChange:function(t,e){this.cardQueryParam={sysOrgCode:c["default"].ls.get("Login_Userinfo").orgCode,startTime:e[0]+":00",endTime:e[1]+":00"}},onOk:function(t){var e=this.url.getDayCountInfo;this.loadDate(e,"day",this.cardQueryParam)},loadDate:function(t,e,a){var r=this;this.cardListData=[],this.lineDataSource=[],Object(l["c"])(t,a,"get").then((function(t){if(t.success)r.countSource=[],["day","week","month","year"].includes(e)?r.getCardNewDataCountSource(t.result):"onlineUser"===e?r.getLineDataSource(t.result,"userOnlineCount"):r.getCardDataCountSource(t.result);else{var a=r;a.$message.warning(t.message)}}))},getCardNewDataCountSource:function(t){this.cardListData=[];for(var e=JSON.parse(t[0].statistData),a=1;a<t.length;a++){var r=JSON.parse(t[a].statistData);e.newUserCount+=r.newUserCount,e.userOnlineCount+=r.userOnlineCount,e.newTopicCount+=r.newTopicCount,e.newTopicPraiseCount+=r.newTopicPraiseCount,e.newReplyCount+=r.newReplyCount,e.newMessageBoardCount+=r.newMessageBoardCount,e.newMessageBoardPraiseCount+=r.newMessageBoardPraiseCount,e.newWaimaiUserCount+=r.newWaimaiUserCount}this.cardListData.push({title:"用户",count:e.newUserCount,type:e.newUserCount>0?"arrow-up":"arrow-down"}),this.cardListData.push({title:"上线用户",count:e.userOnlineCount,type:e.userOnlineCount>0?"arrow-up":"arrow-down"}),this.cardListData.push({title:"帖子",count:e.newTopicCount,type:e.newTopicCount>0?"arrow-up":"arrow-down"}),this.cardListData.push({title:"帖子点赞",count:e.newTopicPraiseCount,type:e.newTopicPraiseCount>0?"arrow-up":"arrow-down"}),this.cardListData.push({title:"评论",count:e.newReplyCount,type:e.newReplyCount>0?"arrow-up":"arrow-down"}),this.cardListData.push({title:"留言",count:e.newMessageBoardCount,type:e.newMessageBoardCount>0?"arrow-up":"arrow-down"}),this.cardListData.push({title:"留言点赞",count:e.newMessageBoardPraiseCount,type:e.newMessageBoardPraiseCount>0?"arrow-up":"arrow-down"}),this.cardListData.push({title:"外卖点击",count:e.newWaimaiUserCount,type:e.newWaimaiUserCount>0?"arrow-up":"arrow-down"})},getCardDataCountSource:function(t){this.cardListData=[];var e=JSON.parse(t[0].statistData);this.cardListData.push({title:"用户",count:e.newUserCount,type:e.newUserCount>0?"arrow-up":"arrow-down"}),this.cardListData.push({title:"上线用户",count:e.userOnlineCount,type:e.userOnlineCount>0?"arrow-up":"arrow-down"}),this.cardListData.push({title:"帖子",count:e.topicCount,type:e.topicCount>0?"arrow-up":"arrow-down"}),this.cardListData.push({title:"帖子点赞",count:e.topicPraiseCount,type:e.topicPraiseCount>0?"arrow-up":"arrow-down"}),this.cardListData.push({title:"评论",count:e.replyCount,type:e.replyCount>0?"arrow-up":"arrow-down"}),this.cardListData.push({title:"留言",count:e.messageBoardCount,type:e.messageBoardCount>0?"arrow-up":"arrow-down"}),this.cardListData.push({title:"留言点赞",count:e.messageBoardPraiseCount,type:e.messageBoardPraiseCount>0?"arrow-up":"arrow-down"}),this.cardListData.push({title:"外卖点击",count:e.waimaiUserCount,type:e.waimaiUserCount>0?"arrow-up":"arrow-down"})},getLineDataSource:function(t,e){for(var a=[],r=0;r<t.length;r++){var n=JSON.parse(t[r].statistData);for(var o in n)if(e===o){var i={};i.type=t[r].createTime,i.在线用户=n.userOnlineCount,a.push(i)}}this.lineDataSource=a,this.lineDataSourceFields=["在线用户"]},callback:function(t){"1"===t?(this.tabStatus="ytd",this.queryYTDDate("day")):"3"===t&&(this.tabStatus="all",this.queryAllDate("all"))},statisticst:function(t){"all"===this.tabStatus?(this.allType=t.target.value,this.queryAllDate(this.allType)):"ytd"===this.tabStatus&&(this.ytdType=t.target.value,this.queryYTDDate(this.ytdType))},queryYTDDate:function(t){this.getUrl(t,{})},queryAllDate:function(t){this.getUrl(t,{})},getUrl:function(t,e){var a="";"day"===t&&(a=this.url.getDayCountInfo,this.cardQueryParam={sysOrgCode:c["default"].ls.get("Login_Userinfo").orgCode,startTime:y()(new Date).format("yyyy-MM-DD 00:00:00"),endTime:y()(new Date).format("yyyy-MM-DD HH:mm:ss")}),"week"===t&&(a=this.url.getDayCountInfo,this.cardQueryParam={sysOrgCode:c["default"].ls.get("Login_Userinfo").orgCode,startTime:y()().weekday(0).format("yyyy-MM-DD 00:00:00"),endTime:y()(new Date).format("yyyy-MM-DD HH:mm:ss")}),"month"===t&&(a=this.url.getDayCountInfo,this.cardQueryParam={sysOrgCode:c["default"].ls.get("Login_Userinfo").orgCode,startTime:y()(new Date).format("yyyy-MM-00 00:00:00"),endTime:y()(new Date).format("yyyy-MM-DD HH:mm:ss")}),"year"===t&&(a=this.url.getDayCountInfo,this.cardQueryParam={sysOrgCode:c["default"].ls.get("Login_Userinfo").orgCode,startTime:y()(new Date).format("yyyy-00-00 00:00:00"),endTime:y()(new Date).format("yyyy-MM-DD HH:mm:ss")}),["all","onlineUser"].includes(t)&&(a=this.url.getAllCountInfo,this.cardQueryParam={sysOrgCode:c["default"].ls.get("Login_Userinfo").orgCode}),this.loadDate(a,t,this.cardQueryParam)}}},f=p,h=(a("098f"),a("cba8")),g=Object(h["a"])(f,r,n,!1,null,"a263fb8a",null);e["default"]=g.exports}}]);