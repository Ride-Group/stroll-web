(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b38315ba"],{"535e":function(e,l,a){"use strict";a.d(l,"a",(function(){return s}));var t=a("7550"),o=a("e2e0"),r=a("0fea"),s={components:{JEditableTable:t["default"]},data:function(){return{title:"操作",visible:!1,confirmLoading:!1,model:{},labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}},methods:{getAllTable:function(){var e=this;if(!(this.refKeys instanceof Array))throw this.throwNotArray("refKeys");var l=this.refKeys.map((function(l){return Object(o["c"])(e,l)}));return Promise.all(l)},eachAllTable:function(e){this.getAllTable().then((function(l){l.forEach((function(l,a){"function"===typeof e&&e(l,a)}))}))},add:function(){var e=this;return new Promise((function(l){e.tableReset(),l()})).then((function(){var l=e.addDefaultRowNum;"number"!==typeof l&&(l=1),e.eachAllTable((function(e){e.add(l)})),"function"===typeof e.addAfter&&e.addAfter(e.model),e.edit(e.model)}))},edit:function(e){e&&"{}"!=JSON.stringify(e)&&e.id&&this.tableReset(),"function"===typeof this.editBefore&&this.editBefore(e),this.visible=!0,this.activeKey=this.refKeys[0],this.$refs.form.resetFields(),this.model=Object.assign({},e),"function"===typeof this.editAfter&&this.editAfter(this.model)},close:function(){this.visible=!1,this.$emit("close")},tableReset:function(){this.eachAllTable((function(e){e.clearRow()}))},requestSubTableData:function(e,l,a,t){a.loading=!0,Object(r["c"])(e,l).then((function(e){var l=e.result,o=[];l&&(Array.isArray(l)?o=l:Array.isArray(l.records)&&(o=l.records)),a.dataSource=o,"function"===typeof t&&t(e)})).finally((function(){a.loading=!1}))},request:function(e){var l=this,a=this.url.add,t="post";this.model.id&&(a=this.url.edit,t="put"),this.confirmLoading=!0,Object(r["h"])(a,e,t).then((function(e){e.success?(l.$message.success(e.message),l.$emit("ok"),l.close()):l.$message.warning(e.message)})).finally((function(){l.confirmLoading=!1}))},handleChangeTabs:function(e){Object(o["c"])(this,e).then((function(e){e.resetScrollTop()}))},handleCancel:function(){this.close()},handleOk:function(){var e=this;this.getAllTable().then((function(l){return Object(o["d"])(e.$refs.form,e.model,l)})).then((function(l){return e.validateSubForm(l)})).then((function(l){if("function"!==typeof e.classifyIntoFormData)throw e.throwNotFunction("classifyIntoFormData");var a=e.classifyIntoFormData(l);return e.request(a)})).catch((function(l){l.error===o["b"]&&(e.activeKey=null==l.index?e.activeKey:l.paneKey?l.paneKey:e.refKeys[l.index])}))},validateSubForm:function(e){return new Promise((function(l){l(e)}))},throwNotFunction:function(e){return"".concat(e," 未定义或不是一个函数")},throwNotArray:function(e){return"".concat(e," 未定义或不是一个数组")}}}},"66c7":function(e,l,a){"use strict";a.r(l);var t=function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("j-form-container",{attrs:{disabled:e.formDisabled}},[a("a-form-model",{ref:"form",attrs:{slot:"detail",model:e.model,rules:e.validatorRules},slot:"detail"},[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"区域编码",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"regionCode"}},[a("a-input",{attrs:{placeholder:"请输入区域编码"},model:{value:e.model.regionCode,callback:function(l){e.$set(e.model,"regionCode",l)},expression:"model.regionCode"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"全称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"fullName"}},[a("a-input",{attrs:{placeholder:"请输入全称"},model:{value:e.model.fullName,callback:function(l){e.$set(e.model,"fullName",l)},expression:"model.fullName"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"简称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"name"}},[a("a-input",{attrs:{placeholder:"请输入简称"},model:{value:e.model.name,callback:function(l){e.$set(e.model,"name",l)},expression:"model.name"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"经度",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"longitude"}},[a("a-input",{attrs:{placeholder:"请输入经度"},model:{value:e.model.longitude,callback:function(l){e.$set(e.model,"longitude",l)},expression:"model.longitude"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"纬度",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"latitude"}},[a("a-input",{attrs:{placeholder:"请输入纬度"},model:{value:e.model.latitude,callback:function(l){e.$set(e.model,"latitude",l)},expression:"model.latitude"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"地图展示名",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"content"}},[a("a-input",{attrs:{placeholder:"请输入地图展示名"},model:{value:e.model.content,callback:function(l){e.$set(e.model,"content",l)},expression:"model.content"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"省份",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"province"}},[a("a-input",{attrs:{placeholder:"请输入省份"},model:{value:e.model.province,callback:function(l){e.$set(e.model,"province",l)},expression:"model.province"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"每日发布贴子数",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"dayPublishTopic"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入每日发布贴子数",disabled:""},model:{value:e.model.dayPublishTopic,callback:function(l){e.$set(e.model,"dayPublishTopic",l)},expression:"model.dayPublishTopic"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"每周发布贴子数",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"weekPublishTopic"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入每周发布贴子数",disabled:""},model:{value:e.model.weekPublishTopic,callback:function(l){e.$set(e.model,"weekPublishTopic",l)},expression:"model.weekPublishTopic"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"每日发布留言数",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"dayPublishMessage"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入每日发布留言数",disabled:""},model:{value:e.model.dayPublishMessage,callback:function(l){e.$set(e.model,"dayPublishMessage",l)},expression:"model.dayPublishMessage"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"每周发布留言数",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"weekPublishMessage"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入每周发布留言数",disabled:""},model:{value:e.model.weekPublishMessage,callback:function(l){e.$set(e.model,"weekPublishMessage",l)},expression:"model.weekPublishMessage"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"每日评论数",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"dayPublishReply"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入每日评论数",disabled:""},model:{value:e.model.dayPublishReply,callback:function(l){e.$set(e.model,"dayPublishReply",l)},expression:"model.dayPublishReply"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"每周评论数",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"weekPublishReply"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入每周评论数",disabled:""},model:{value:e.model.weekPublishReply,callback:function(l){e.$set(e.model,"weekPublishReply",l)},expression:"model.weekPublishReply"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"每日点赞数",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"dayPublishPraise"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入每日点赞数",disabled:""},model:{value:e.model.dayPublishPraise,callback:function(l){e.$set(e.model,"dayPublishPraise",l)},expression:"model.dayPublishPraise"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"每周点赞数",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"weekPublishPraise"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入每周点赞数",disabled:""},model:{value:e.model.weekPublishPraise,callback:function(l){e.$set(e.model,"weekPublishPraise",l)},expression:"model.weekPublishPraise"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"区域类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"regionType"}},[a("j-dict-select-tag",{attrs:{type:"list",dictCode:"bbs_region_type",placeholder:"请选择区域类型"},model:{value:e.model.regionType,callback:function(l){e.$set(e.model,"regionType",l)},expression:"model.regionType"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"缩放等级",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"scale"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入缩放等级"},model:{value:e.model.scale,callback:function(l){e.$set(e.model,"scale",l)},expression:"model.scale"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"范围半径",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"radius"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入范围半径"},model:{value:e.model.radius,callback:function(l){e.$set(e.model,"radius",l)},expression:"model.radius"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"区域等级",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"regionGrade"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入区域等级"},model:{value:e.model.regionGrade,callback:function(l){e.$set(e.model,"regionGrade",l)},expression:"model.regionGrade"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"公众号二维码",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"officeAccountImage"}},[a("j-image-upload",{attrs:{isMultiple:"",number:1},model:{value:e.model.officeAccountImage,callback:function(l){e.$set(e.model,"officeAccountImage",l)},expression:"model.officeAccountImage"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"区域头像",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"regionImage"}},[a("j-image-upload",{attrs:{isMultiple:"",number:1},model:{value:e.model.regionImage,callback:function(l){e.$set(e.model,"regionImage",l)},expression:"model.regionImage"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"收款码",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"payeeImage"}},[a("j-image-upload",{attrs:{isMultiple:"",number:1},model:{value:e.model.payeeImage,callback:function(l){e.$set(e.model,"payeeImage",l)},expression:"model.payeeImage"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"朋友圈二维码",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"circleFriendsImage"}},[a("j-image-upload",{attrs:{isMultiple:"",number:1},model:{value:e.model.circleFriendsImage,callback:function(l){e.$set(e.model,"circleFriendsImage",l)},expression:"model.circleFriendsImage"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"regionStatus"}},[a("j-dict-select-tag",{attrs:{type:"list",dictCode:"bbs_region_region_status",placeholder:"请选择状态"},model:{value:e.model.regionStatus,callback:function(l){e.$set(e.model,"regionStatus",l)},expression:"model.regionStatus"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"区域关联部门ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"regionDepartId"}},[a("a-input",{attrs:{placeholder:"请输入区域关联部门ID"},model:{value:e.model.regionDepartId,callback:function(l){e.$set(e.model,"regionDepartId",l)},expression:"model.regionDepartId"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"小商店ID",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"miniStoreAppid"}},[a("a-input",{attrs:{placeholder:"请输入小商店ID"},model:{value:e.model.miniStoreAppid,callback:function(l){e.$set(e.model,"miniStoreAppid",l)},expression:"model.miniStoreAppid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"私有区域",labelCol:e.labelCol,wrapperCol:e.wrapperCol,prop:"isPrivate"}},[a("j-dict-select-tag",{attrs:{type:"list",dictCode:"bbs_region_is_private",placeholder:"请选择私有区域"},model:{value:e.model.isPrivate,callback:function(l){e.$set(e.model,"isPrivate",l)},expression:"model.isPrivate"}})],1)],1)],1)],1)],1),a("a-tabs",{on:{change:e.handleChangeTabs},model:{value:e.activeKey,callback:function(l){e.activeKey=l},expression:"activeKey"}},[a("a-tab-pane",{key:e.refKeys[0],attrs:{tab:"版块",forceRender:!0}},[a("j-editable-table",{ref:e.refKeys[0],attrs:{loading:e.bbsClassTable.loading,columns:e.bbsClassTable.columns,dataSource:e.bbsClassTable.dataSource,maxHeight:300,disabled:e.formDisabled,rowNumber:!0,rowSelection:!0,actionButton:!0}})],1)],1)],1)},o=[],r=(a("0fea"),a("e2e0")),s=a("535e"),i=a("ca00");function n(e,l){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);l&&(t=t.filter((function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),a.push.apply(a,t)}return a}function d(e){for(var l=1;l<arguments.length;l++){var a=null!=arguments[l]?arguments[l]:{};l%2?n(Object(a),!0).forEach((function(l){p(e,l,a[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(a,l))}))}return e}function p(e,l,a){return l in e?Object.defineProperty(e,l,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[l]=a,e}var c={name:"BbsRegionForm",mixins:[s["a"]],components:{},data:function(){var e=this;return{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}},labelCol2:{xs:{span:24},sm:{span:3}},wrapperCol2:{xs:{span:24},sm:{span:20}},model:{province:"陕西省-",dayPublishTopic:2,weekPublishTopic:5,dayPublishMessage:5,weekPublishMessage:20,dayPublishReply:20,weekPublishReply:50,dayPublishPraise:100,weekPublishPraise:500,scale:13,radius:1e3,regionGrade:5},addDefaultRowNum:1,validatorRules:{regionCode:[{required:!0,message:"请输入区域编码!"},{validator:function(l,a,t){return Object(i["q"])("bbs_region","region_code",a,e.model.id,t)}}],fullName:[{required:!0,message:"请输入全称!"}],name:[{required:!0,message:"请输入简称!"}],longitude:[{required:!0,message:"请输入经度!"}],latitude:[{required:!0,message:"请输入纬度!"}],content:[{required:!0,message:"请输入地图展示名!"}],regionType:[{required:!0,message:"请输入区域类型!"}],scale:[{required:!0,message:"请输入缩放等级!"}],radius:[{required:!0,message:"请输入范围半径!"}]},refKeys:["bbsClass"],tableKeys:["bbsClass"],activeKey:"bbsClass",bbsClassTable:{loading:!1,dataSource:[],columns:[{title:"版块编码(不允许修改)",key:"classCode",type:r["a"].input,width:"200px",placeholder:"请输入${title}",defaultValue:"",validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"版块名称",key:"className",type:r["a"].input,width:"200px",placeholder:"请输入${title}",defaultValue:"",validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"版块排序",key:"classSort",type:r["a"].inputNumber,width:"200px",placeholder:"请输入${title}",defaultValue:"",validateRules:[{required:!0,message:"${title}不能为空"}]},{title:"版块贴子数量",key:"classTopicCount",type:r["a"].inputNumber,disabled:!0,width:"200px",placeholder:"请输入${title}",defaultValue:""}]},url:{add:"/bbs/bbsRegion/wise/back/add",edit:"/bbs/bbsRegion/edit",queryById:"/bbs/bbsRegion/queryById",bbsClass:{list:"/bbs/bbsRegion/queryBbsClassByMainId"}}}},props:{disabled:{type:Boolean,default:!1,required:!1}},computed:{formDisabled:function(){return this.disabled}},created:function(){},methods:{addBefore:function(){this.bbsClassTable.dataSource=[]},getAllTable:function(){var e=this,l=this.tableKeys.map((function(l){return Object(r["c"])(e,l)}));return Promise.all(l)},editAfter:function(){if(this.$nextTick((function(){})),this.model.id){var e={id:this.model.id};this.requestSubTableData(this.url.bbsClass.list,e,this.bbsClassTable)}},validateSubForm:function(e){var l=this;return new Promise((function(a,t){Promise.all([]).then((function(){a(e)})).catch((function(e){e.error===r["b"]&&(l.activeKey=null==e.index?l.activeKey:l.refKeys[e.index])}))}))},classifyIntoFormData:function(e){var l=Object.assign(this.model,e.formValue);return d(d({},l),{},{bbsClassList:e.tablesValue[0].values})},validateError:function(e){this.$message.error(e)}}},u=c,m=a("cba8"),b=Object(m["a"])(u,t,o,!1,null,"b77341fa",null);l["default"]=b.exports}}]);